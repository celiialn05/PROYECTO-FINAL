-- Crear la base de datos
CREATE DATABASE financify;
USE financify;

-- Crear la tabla USUARIOS
CREATE TABLE USUARIOS (
    ID INT AUTO_INCREMENT PRIMARY KEY,
    DNI VARCHAR(20) NOT NULL UNIQUE,
    CONTRASENA VARCHAR(255) NOT NULL
);

-- Crear la tabla DATOS_USUARIOS
CREATE TABLE DATOS_USUARIOS (
    ID INT AUTO_INCREMENT PRIMARY KEY,
    NOMBRE VARCHAR(50) NOT NULL,
    APELLIDO VARCHAR(50) NOT NULL,
    EDAD INT NOT NULL,
    EMAIL VARCHAR(50),
    IMAGEN BLOB,
    ID_USUARIO INT,
    FOREIGN KEY (ID_USUARIO) REFERENCES USUARIOS(ID)
);

-- Crear la tabla ESTADISTICAS
CREATE TABLE ESTADISTICAS (
    ID INT AUTO_INCREMENT PRIMARY KEY,
    FECHA_REGISTRO DATE NOT NULL,
    MONTO DECIMAL(10, 2) NOT NULL,
    ID_USUARIO INT,
    ID_CATEGORIA INT,
    FOREIGN KEY (ID_USUARIO) REFERENCES USUARIOS(ID),
    FOREIGN KEY (ID_CATEGORIA) REFERENCES CATEGORIAS(ID)
);

-- Crear la tabla CATEGORIAS
CREATE TABLE CATEGORIAS (
    ID INT AUTO_INCREMENT PRIMARY KEY,
    CATEGORIA VARCHAR(50) NOT NULL
);

-- Crear la tabla PREGUNTAS_SEGURIDAD
CREATE TABLE PREGUNTAS_SEGURIDAD (
    ID INT AUTO_INCREMENT PRIMARY KEY,
    PREGUNTA VARCHAR(255) NOT NULL
);

-- Crear la tabla RESPUESTAS_SEGURIDAD
CREATE TABLE RESPUESTAS_SEGURIDAD (
    ID INT AUTO_INCREMENT PRIMARY KEY,
    RESPUESTA VARCHAR(255) NOT NULL,
    ID_PREGUNTA INT,
    ID_USUARIO INT,
    FOREIGN KEY (ID_PREGUNTA) REFERENCES PREGUNTAS_SEGURIDAD(ID),
    FOREIGN KEY (ID_USUARIO) REFERENCES USUARIOS(ID)
);
